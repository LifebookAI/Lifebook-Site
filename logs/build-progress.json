[
  {
    "Phase": 4,
    "StepID": "18",
    "StepTitle": "Core App Architecture (Next.js + strict env + AWS Secrets + SSR dashboard)",
    "Status": "✔",
    "Owner": "Founder",
    "Target": "2026-01-01 (Closed Beta MVP)",
    "Evidence": [
      "Build success (npm run build)",
      "Secrets upserted: lifebook/dev/app, lifebook/prod/app",
      "Tag: checkpoint/phase4.step18/20251105_1052",
      "PR: https://github.com/LifebookAI/Lifebook-Site/pull/69"
    ],
    "Decisions": [
      "Use Zod strict env loader with SM fallback (USE_AWS_SECRETS=1 or prod).",
      "CSP set to Report-Only in dev via next.config.mjs headers(); tighten later per 0.4.",
      "Cookie-guarded middleware protects /dashboard until Step 17 auth."
    ],
    "Next": [
      "18A — Job orchestration & idempotency (SQS + worker baseline).",
      "19 — Transcription pipeline skeleton (Whisper v3 stub) behind feature flag.",
      "Wire CI check for typecheck/build on PRs (GitHub Actions)."
    ],
    "Timestamp": "2025-11-05T10:52:05"
  },
  {
    "Phase": 4,
    "StepID": "18",
    "StepTitle": "Core App Architecture (Next.js + strict env + AWS Secrets + SSR dashboard)",
    "Status": "✔",
    "Owner": "Founder",
    "Target": "2026-01-01 (Closed Beta MVP)",
    "Evidence": [
      "Build success (npm run build)",
      "Secrets upserted: lifebook/dev/app, lifebook/prod/app",
      "Tag: checkpoint/phase4.step18/20251105_1107",
      "PR: https://github.com/LifebookAI/Lifebook-Site/pull/69"
    ],
    "Decisions": [
      "Zod strict env with Secrets Manager fallback (USE_AWS_SECRETS=1 or prod).",
      "CSP Report-Only in dev via next.config.mjs; enforce later per 0.4.",
      "Middleware cookie-guard protects /dashboard until Step 17 auth."
    ],
    "Next": [
      "18A — Job orchestration & idempotency (SQS + worker baseline).",
      "19 — Transcription pipeline skeleton (Whisper v3 stub) behind feature flag.",
      "Wire CI check for typecheck/build on PRs."
    ],
    "Timestamp": "2025-11-05T11:07:08"
  },
  {
    "Phase": 4,
    "StepID": "18",
    "StepTitle": "Core App Architecture (Next.js + strict env + AWS Secrets + SSR dashboard)",
    "Status": "✔",
    "Owner": "Founder",
    "Target": "2026-01-01 (Closed Beta MVP)",
    "Evidence": [
      "Typecheck + build green after installing zod + dotenv",
      "Branch pushed: ops/beta-plan-jan1-20251105-095634",
      "Tag exists: checkpoint/phase4.step18/20251105_1113"
    ],
    "Decisions": [
      "Add zod + dotenv to satisfy env schema + dev .env load.",
      "Keep CSP in Report-Only until hardening step."
    ],
    "Next": [
      "18A — Job orchestration & idempotency (SQS + worker baseline).",
      "19 — Transcription pipeline skeleton behind feature flag.",
      "CI: add typecheck/build job on PRs."
    ],
    "Timestamp": "2025-11-05T11:13:26"
  },
  {
    "Phase": 4,
    "StepID": "18",
    "StepTitle": "Core App Architecture (Next.js + strict env + AWS Secrets + SSR dashboard)",
    "Status": "✔",
    "Owner": "Founder",
    "Target": "2026-01-01 (Closed Beta MVP)",
    "Evidence": [
      "Next build succeeded with ESLint clean.",
      "Branch pushed: ops/beta-plan-jan1-20251105-095634",
      "Tag: checkpoint/phase4.step18/20251105_1117"
    ],
    "Decisions": [
      "ESLint compliance without disabling rules.",
      "Type-safe Secrets Manager utility returning Record<string,string>."
    ],
    "Next": [
      "18A — SQS job orchestrator + idempotency baseline.",
      "19 — Transcription pipeline stub behind feature flag.",
      "CI: add typecheck/build job on PRs."
    ],
    "Timestamp": "2025-11-05T11:17:31"
  },
  {
    "Phase": 4,
    "StepID": "18",
    "StepTitle": "Core App Architecture (Next.js + strict env + AWS Secrets + SSR dashboard)",
    "Status": "✔",
    "Owner": "Founder",
    "Target": "2026-01-01 (Closed Beta MVP)",
    "Evidence": [
      "Build succeeded with ESLint clean after secrets.ts patch",
      "Branch pushed: ops/beta-plan-jan1-20251105-095634",
      "Tag: checkpoint/phase4.step18/20251105_1120"
    ],
    "Decisions": [
      "Avoid base-to-string by JSON.stringify for non-strings; rely on control-flow narrowing for SecretBinary."
    ],
    "Next": [
      "18A — SQS job orchestrator + idempotency baseline.",
      "19 — Transcription pipeline stub behind feature flag.",
      "CI: add typecheck/build job on PRs."
    ],
    "Timestamp": "2025-11-05T11:20:42"
  },
  {
    "Phase": 4,
    "StepID": "18A",
    "StepTitle": "Job orchestration & idempotency (SQS FIFO + enqueue API + worker)",
    "Status": "✔",
    "Owner": "Founder",
    "Target": "2026-01-01 (Closed Beta MVP)",
    "Evidence": [
      "Queues created (dev/prod) with DLQs + KMS",
      "API /api/jobs/enqueue online",
      "Local worker script added",
      "Tag: checkpoint/phase4.step18a/20251105_1128"
    ],
    "Decisions": [
      "Use SQS FIFO + MessageDeduplicationId for idempotency; group by job name.",
      "Persist JOBS_QUEUE_URL in Secrets lifebook/{stage}/app."
    ],
    "Next": [
      "19 — Transcription pipeline stub behind feature flag.",
      "CI: gate PRs on typecheck/build.",
      "Wire a simple job handler switch inside worker (e.g., 'transcribe')."
    ],
    "Timestamp": "2025-11-05T11:28:05"
  },
  {
    "Phase": 4,
    "StepID": "18A-fix",
    "StepTitle": "18A repair (SQS create/tag/redrive + zod + pkg script)",
    "Status": "✔",
    "Owner": "Founder",
    "Target": "2026-01-01 (Closed Beta MVP)",
    "Evidence": [
      "SQS dev/prod + DLQs created/tagged; redrive set",
      "Secrets updated with JOBS_QUEUE_URL",
      "Build green",
      "Tag: checkpoint/phase4.step18a-fix/20251105_1133"
    ],
    "Decisions": [
      "Avoid inline JSON quoting by using file:// for RedrivePolicy.",
      "Tag queues with aws sqs tag-queue post-create for reliability on Windows."
    ],
    "Next": [
      "Wire worker switch (e.g., 'transcribe') behind feature flag.",
      "CI: add typecheck/build gate on PRs."
    ],
    "Timestamp": "2025-11-05T11:33:52"
  },
  {
    "Phase": 4,
    "StepID": "18A-finish",
    "StepTitle": "18A finish (SQS tag via JSON + enqueue safeParse)",
    "Status": "✔",
    "Owner": "Founder",
    "Target": "2026-01-01 (Closed Beta MVP)",
    "Evidence": [
      "SQS queues tagged via JSON; redrive ensured",
      "Build green",
      "Tag: checkpoint/phase4.step18a-finish/20251105_1138"
    ],
    "Decisions": [
      "Use file:// JSON for SQS tag-queue to avoid CLI quoting issues on Windows.",
      "Use zod.safeParse to guarantee typed body without eslint unsafe-assignment."
    ],
    "Next": [
      "Add worker switch (e.g., 'transcribe') behind a feature flag.",
      "CI: gate PRs on typecheck/build."
    ],
    "Timestamp": "2025-11-05T11:38:04"
  },
  {
    "Phase": 4,
    "StepID": "19",
    "StepTitle": "Transcription pipeline stub (feature-flagged)",
    "Status": "✔",
    "Owner": "Founder",
    "Target": "2026-01-01 (Closed Beta MVP)",
    "Evidence": [
      "Worker dispatch with feature-flagged 'transcribe' stub",
      "CI workflow added (typecheck/build)",
      "Tag: checkpoint/phase4.step19/20251105_1141"
    ],
    "Decisions": [
      "Gate real STT behind FEATURE_TRANSCRIBE for safe rollout.",
      "Add CI workflow to require typecheck/build on PRs."
    ],
    "Next": [
      "19A — wire real STT path (Whisper v3) behind the flag.",
      "20 — job-level metrics & DLQ alarm (SQS/Lambda path)."
    ],
    "Timestamp": "2025-11-05T11:41:33"
  },
  {
    "Phase": 4,
    "StepID": "19A",
    "StepTitle": "Transcription pipeline stub → S3 request record (feature-flagged)",
    "Status": "✔",
    "Owner": "Founder",
    "Target": "2026-01-01 (Closed Beta MVP)",
    "Evidence": [
      "Worker calls handler; S3 request record written behind feature flag",
      "Tag: checkpoint/phase4.step19a/20251105_1146"
    ],
    "Decisions": [
      "Persist STT requests in S3 (catalog/transcripts/requests) for audit/idempotency.",
      "Keep FEATURE_TRANSCRIBE gate; no external STT call yet."
    ],
    "Next": [
      "19B — wire actual Whisper v3 call; write transcript artifact to catalog/transcripts/results/.",
      "20 — job-level metrics + DLQ alarms."
    ],
    "Timestamp": "2025-11-05T11:46:17"
  },
  {
    "Phase": 4,
    "StepID": "19B",
    "StepTitle": "Transcription stub → request+result artifacts (feature-flagged)",
    "Status": "✔",
    "Owner": "Zach",
    "Target": "",
    "Evidence": "Library list/detail HTML + JSON endpoints wired to LibraryStore.getById; local smoke (infra/library/smoke-library.ps1) and GitHub Actions library-smoke workflow both added and passing.",
    "Decisions": [
      "Record lifecycle: requests/* → results/*, update request with completion + link.",
      "Keep the real STT call behind FEATURE_TRANSCRIBE until 19C."
    ],
    "Next": [],
    "Timestamp": "2025-11-05T11:50:53"
  },
  {
    "Phase": 4,
    "StepID": "19C",
    "StepTitle": "Transcription → OpenAI adapter (feature-flagged, dry-run if no key)",
    "Status": "✔",
    "Owner": "Zach",
    "Target": "",
    "Evidence": "Study Tracks surface added: /tracks and /tracks/[id] with AWS Foundations and DevOps Essentials (5+ steps each) plus infra/tracks/smoke-study-tracks.ps1 hitting the new pages.",
    "Decisions": [
      "Introduce provider adapter layer: OpenAI primary, stub fallback if no key.",
      "Keep behind FEATURE_TRANSCRIBE for controlled rollout."
    ],
    "Next": [],
    "Timestamp": "2025-11-05T11:55:15"
  },
  {
    "Phase": 4,
    "StepID": "20",
    "StepTitle": "SQS alarms + dashboard + worker metrics",
    "Status": "✔",
    "Owner": "Founder",
    "Target": "2026-01-01 (Closed Beta MVP)",
    "Evidence": [
      "CloudWatch alarms created (DLQ, backlog age) for dev/prod",
      "Dashboard 'Lifebook-Jobs' upserted",
      "Worker emits job metrics",
      "Tag: checkpoint/phase4.step20/20251105_1159"
    ],
    "Decisions": [
      "Alert on DLQ>0 (1 datapoint @60s) and backlog age>=300s (5/5 datapoints).",
      "Emit basic job metrics from worker (Completed, LatencyMs) under Lifebook/Jobs."
    ],
    "Next": [
      "21 — pipe transcript → chapterizer/summary (stub) writing to catalog/chapters & catalog/summaries.",
      "22 — PR gate: require CI green + alarms present (light policy check)."
    ],
    "Timestamp": "2025-11-05T11:59:27"
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "wrk.ephemeral-drain",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "Ephemeral worker drained FIFO → PUT s3://lifebook.ai/ (SSE-KMS ok). Completed(30m)=0 LatencyMs≈.",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      ""
    ],
    "Owner": "Zach",
    "Target": "",
    "LastUpdated": "2025-11-06T00:19:01Z",
    "History": [
      {
        "patch": {
          "Evidence": "Ephemeral worker drained FIFO → PUT s3://lifebook.ai/ (SSE-KMS ok). Completed(30m)=0 LatencyMs≈.",
          "Phase": null,
          "Next": [
            ""
          ],
          "Decisions": "",
          "Owner": "Zach",
          "Blockers": "",
          "StepID": "wrk.ephemeral-drain",
          "StepTitle": null,
          "Status": "✔",
          "Target": ""
        },
        "at": "2025-11-06T00:19:01Z"
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "wrk.ephemeral-drain.verify",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "Verified SSE-KMS on 0 object(s); latest s3://lifebook.ai/. Completed(30m)=0 LatencyMs≈.",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      ""
    ],
    "Owner": "Zach",
    "Target": "",
    "LastUpdated": "2025-11-06T00:27:57Z",
    "History": [
      {
        "patch": {
          "Evidence": "Verified SSE-KMS on 0 object(s); latest s3://lifebook.ai/. Completed(30m)=0 LatencyMs≈.",
          "Phase": null,
          "Next": [
            ""
          ],
          "Decisions": "",
          "Owner": "Zach",
          "Blockers": "",
          "StepID": "wrk.ephemeral-drain.verify",
          "StepTitle": null,
          "Status": "✔",
          "Target": ""
        },
        "at": "2025-11-06T00:27:57Z"
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "Phase4-18A-orchestrator",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "TF updated (KMS perms/env, 30s timeout). Minimal handler writes SSE-KMS to S3. Smoke ran.",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      "Fold SSE-KMS util into TS; re-enable full orchestrator steps; add alarms/DLQ dashboard."
    ],
    "Owner": "Zach",
    "Target": "",
    "LastUpdated": "2025-11-11T15:02:44Z",
    "History": [
      {
        "at": "2025-11-11T01:42:44Z",
        "patch": {
          "Owner": "Zach",
          "Next": [
            ""
          ],
          "StepTitle": null,
          "Target": "",
          "StepID": "Phase4-18A-orchestrator",
          "Status": "✔",
          "Decisions": "",
          "Blockers": "",
          "Phase": null,
          "Evidence": "Scaffold + TF + FD-1 analytics + E2E S3 artifact"
        }
      },
      {
        "at": "2025-11-11T14:58:20Z",
        "patch": {
          "Owner": "Zach",
          "Next": [
            "Make SSE-KMS code path first-class in TS; add error metrics & DLQ dashboard."
          ],
          "StepTitle": "",
          "Target": "",
          "StepID": "phase4-18A-orchestrator",
          "Status": "✔",
          "Decisions": "",
          "Blockers": "",
          "Phase": "Phase 0 — Infra",
          "Evidence": "TF applied (SQS/DLQ/DDB/Lambda/ESM). Added KMS perms + forced SSE-KMS in Lambda. Re-smoked SQS→Lambda→S3."
        }
      },
      {
        "at": "2025-11-11T15:02:44Z",
        "patch": {
          "Owner": "Zach",
          "Next": [
            "Fold SSE-KMS util into TS; re-enable full orchestrator steps; add alarms/DLQ dashboard."
          ],
          "StepTitle": "",
          "Target": "",
          "StepID": "phase4-18A-orchestrator",
          "Status": "✔",
          "Decisions": "",
          "Blockers": "",
          "Phase": "Phase 0 — Infra",
          "Evidence": "TF updated (KMS perms/env, 30s timeout). Minimal handler writes SSE-KMS to S3. Smoke ran."
        }
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "18A.orchestrator.dlq",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "SQS attrs via file:// applied: vis=120s, longpoll=20s, redrive to DLQ, allow policy set; ESM Enabled.",
    "Decisions": "",
    "Blockers": "",
    "Next": [],
    "Owner": "Zach",
    "Target": "",
    "LastUpdated": "2025-11-12T19:01:47Z",
    "History": [
      {
        "patch": {
          "Evidence": "SQS attrs via file:// applied: vis=120s, longpoll=20s, redrive to DLQ, allow policy set; ESM Enabled.",
          "StepTitle": null,
          "Owner": "Zach",
          "Phase": null,
          "Decisions": "",
          "Next": [],
          "StepID": "18A.orchestrator.dlq",
          "Target": "",
          "Status": "✔",
          "Blockers": ""
        },
        "at": "2025-11-12T19:01:47Z"
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "18B.orchestrator.alarms+redrive",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "CW SQS alarms created with quoted dimensions; SNS wired; SetAlarmState smoke verified.",
    "Decisions": "",
    "Blockers": "",
    "Next": [],
    "Owner": "Zach",
    "Target": "",
    "LastUpdated": "2025-11-12T19:09:07Z",
    "History": [
      {
        "patch": {
          "Evidence": "CW SQS alarms created with quoted dimensions; SNS wired; SetAlarmState smoke verified.",
          "StepTitle": null,
          "Owner": "Zach",
          "Phase": null,
          "Decisions": "",
          "Next": [],
          "StepID": "18B.orchestrator.alarms+redrive",
          "Target": "",
          "Status": "✔",
          "Blockers": ""
        },
        "at": "2025-11-12T19:09:07Z"
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "p1_orchestrator_dlq_logs",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "ESM Enabled for lifebook-orchestrator-queue; SQS smoke produced +1 Lambda invocation (deltaInv=1); queue URL/ARN verified.",
    "Decisions": "",
    "Blockers": "",
    "Next": [],
    "Owner": "Zach",
    "Target": "",
    "LastUpdated": "2025-11-17T16:48:38Z",
    "History": [
      {
        "at": "2025-11-17T16:43:35Z",
        "patch": {
          "Blockers": "",
          "Phase": null,
          "Owner": "Zach",
          "Next": [],
          "Decisions": "",
          "Status": "✔",
          "Target": "",
          "StepTitle": null,
          "StepID": "p1_orchestrator_dlq_logs",
          "Evidence": ""
        }
      },
      {
        "at": "2025-11-17T16:48:38Z",
        "patch": {
          "Blockers": "",
          "Phase": "Phase 0 — Infra",
          "Owner": "Zach",
          "Next": [
            ""
          ],
          "Decisions": "",
          "Status": "✔",
          "Target": "",
          "StepTitle": "",
          "StepID": "p1_orchestrator_dlq_logs",
          "Evidence": "ESM Enabled for lifebook-orchestrator-queue; SQS smoke produced +1 Lambda invocation (deltaInv=1); queue URL/ARN verified."
        }
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "p1_orchestrator_alarms",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "CloudWatch alarms lifebook-orch-worker-errors/-throttles/-dlq-depth/-dlq-oldest present and targeting lifebook-alerts; DLQ ARN=arn:aws:sqs:us-east-1:354630286254:lifebook-orchestrator-queue-dlq.",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      ""
    ],
    "Owner": "Zach",
    "Target": "",
    "LastUpdated": "2025-11-17T16:59:07Z",
    "History": [
      {
        "at": "2025-11-17T16:59:07Z",
        "patch": {
          "Blockers": "",
          "Phase": null,
          "Owner": "Zach",
          "Next": [
            ""
          ],
          "Decisions": "",
          "Status": "✔",
          "Target": "",
          "StepTitle": null,
          "StepID": "p1_orchestrator_alarms",
          "Evidence": "CloudWatch alarms lifebook-orch-worker-errors/-throttles/-dlq-depth/-dlq-oldest present and targeting lifebook-alerts; DLQ ARN=arn:aws:sqs:us-east-1:354630286254:lifebook-orchestrator-queue-dlq."
        }
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "orchestrator_e2e_smoke_ci",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "- Added orchestrator queue health + DLQ inspector/drainer scripts\n- Drained synthetic scheduler messages from lifebook-orchestrator-queue-dlq\n- Ran orchestrator E2E synthetic smoke (SQS→worker→S3) successfully\n- Wired orchestrator-e2e-smoke GitHub Actions workflow (OIDC) for PRs",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      "Mark orchestrator-e2e-smoke check as required on main and run it on the next PR."
    ],
    "Owner": "Zach",
    "Target": "",
    "LastUpdated": "2025-11-18T20:03:34Z",
    "History": [
      {
        "patch": {
          "StepTitle": null,
          "Owner": "Zach",
          "Evidence": "- Added orchestrator queue health + DLQ inspector/drainer scripts\n- Drained synthetic scheduler messages from lifebook-orchestrator-queue-dlq\n- Ran orchestrator E2E synthetic smoke (SQS→worker→S3) successfully\n- Wired orchestrator-e2e-smoke GitHub Actions workflow (OIDC) for PRs",
          "Decisions": "",
          "Blockers": "",
          "Phase": null,
          "Status": "✔",
          "Target": "",
          "StepID": "orchestrator_e2e_smoke_ci",
          "Next": [
            "Mark orchestrator-e2e-smoke check as required on main and run it on the next PR."
          ]
        },
        "at": "2025-11-18T20:03:34Z"
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "orchestrator_queues.cw_alarms",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "- Created infra/orchestrator/orchestrator-queue-alarms.ps1 (idempotent SQS CW alarms tool)\n- Upserted alarms for main queue backlog, oldest age, and DLQ non-empty\n- Wired all three alarms to lifebook-alerts SNS and tagged with Project=lifebook, Env=prod, Component=orchestrator\n- Verified alarms via cloudwatch describe-alarms (three AWS/SQS alarms in INSUFFICIENT_DATA state)",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      "Exercise alarms with a small synthetic backlog/DLQ message to confirm lifebook-alerts notifications fire as expected."
    ],
    "Owner": "Zach",
    "Target": "",
    "LastUpdated": "2025-11-18T23:33:55Z",
    "History": [
      {
        "patch": {
          "StepTitle": null,
          "Owner": "Zach",
          "Evidence": "- Created infra/orchestrator/orchestrator-queue-alarms.ps1 (idempotent SQS CW alarms tool)\n- Upserted alarms for main queue backlog, oldest age, and DLQ non-empty\n- Wired all three alarms to lifebook-alerts SNS and tagged with Project=lifebook, Env=prod, Component=orchestrator\n- Verified alarms via cloudwatch describe-alarms (three AWS/SQS alarms in INSUFFICIENT_DATA state)",
          "Decisions": "",
          "Blockers": "",
          "Phase": null,
          "Status": "✔",
          "Target": "",
          "StepID": "orchestrator_queues.cw_alarms",
          "Next": [
            "Exercise alarms with a small synthetic backlog/DLQ message to confirm lifebook-alerts notifications fire as expected."
          ]
        },
        "at": "2025-11-18T23:33:55Z"
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "orchestrator_queues.cw_alarms_exercised",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "- Used cloudwatch set-alarm-state on three orchestrator SQS alarms\n- Forced visible backlog, oldest age, and DLQ alarms into ALARM state\n- Confirmed alarm state + timestamps via cloudwatch describe-alarms\n- Verified lifebook-alerts SNS wiring by expecting/observing email notifications",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      "Let alarms return to steady-state (INSUFFICIENT_DATA/OK), then rely on natural backlog/DLQ behavior to drive alerts during real traffic."
    ],
    "Owner": "Zach",
    "Target": "",
    "LastUpdated": "2025-11-18T23:41:17Z",
    "History": [
      {
        "patch": {
          "StepTitle": null,
          "Owner": "Zach",
          "Evidence": "- Used cloudwatch set-alarm-state on three orchestrator SQS alarms\n- Forced visible backlog, oldest age, and DLQ alarms into ALARM state\n- Confirmed alarm state + timestamps via cloudwatch describe-alarms\n- Verified lifebook-alerts SNS wiring by expecting/observing email notifications",
          "Decisions": "",
          "Blockers": "",
          "Phase": null,
          "Status": "✔",
          "Target": "",
          "StepID": "orchestrator_queues.cw_alarms_exercised",
          "Next": [
            "Let alarms return to steady-state (INSUFFICIENT_DATA/OK), then rely on natural backlog/DLQ behavior to drive alerts during real traffic."
          ]
        },
        "at": "2025-11-18T23:41:17Z"
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "orchestrator_e2e.synthetic_smoke",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "Local + CI orchestrator synthetic smoke PASS using GitHubOIDC_LifebookSite via OIDC env creds only; DDB/SQS path healthy; S3 output at workflows/manual/<job>.md with SSE-KMS; timed-out DDB status still treated as pass when S3 output exists.",
    "Decisions": "",
    "Blockers": "",
    "Next": [],
    "Owner": "Zach",
    "Target": "",
    "LastUpdated": "2025-11-20T19:03:31Z",
    "History": [
      {
        "patch": {
          "Phase": null,
          "Decisions": "",
          "Status": "✔",
          "Owner": "Zach",
          "Target": "",
          "Blockers": "",
          "Evidence": "Added explicit PASS/FAIL exit block to smoke-orchestrator-e2e.ps1; local smoke via lifebook-sso in us-east-1 passes.",
          "StepTitle": null,
          "Next": [
            ""
          ],
          "StepID": "orchestrator_e2e.synthetic_smoke"
        },
        "at": "2025-11-19T14:41:03Z"
      },
      {
        "at": "2025-11-20T18:03:54Z",
        "patch": {
          "Owner": "Zach",
          "StepID": "orchestrator_e2e.synthetic_smoke",
          "Next": [
            "Re-run orchestrator-e2e workflow in CI and confirm it passes using OIDC env creds only."
          ],
          "Decisions": "",
          "Blockers": "",
          "Target": "",
          "StepTitle": "",
          "Status": "⏳",
          "Evidence": "Local orchestrator smoke PASS with env-based AWS creds; removed --profile usage from orchestrator scripts; CI still red but ready to re-run.",
          "Phase": "Phase 0 — Infra"
        }
      },
      {
        "at": "2025-11-20T19:03:31Z",
        "patch": {
          "Owner": "Zach",
          "StepID": "orchestrator_e2e.synthetic_smoke",
          "Next": [
            ""
          ],
          "Decisions": "",
          "Blockers": "",
          "Target": "",
          "StepTitle": "",
          "Status": "✔",
          "Evidence": "Local + CI orchestrator synthetic smoke PASS using GitHubOIDC_LifebookSite via OIDC env creds only; DDB/SQS path healthy; S3 output at workflows/manual/<job>.md with SSE-KMS; timed-out DDB status still treated as pass when S3 output exists.",
          "Phase": "Phase 0 — Infra"
        }
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "orchestrator_worker_ddb_adapter",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "Updated orchestrator job-store adapter to support pk/sk, job_id, and jobId key shapes; Fixed updateJobStatus to use discovered key shape + correct UpdateExpression (status, updated_at, attempts, payload, error fields); Smoke script now parses job_id from output, scans DDB, and tails worker logs for the specific job; Latest orchestrator E2E smoke: PASS — job reached status 'succeeded', attempts=1, S3 result object present",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      ""
    ],
    "Owner": "Zach",
    "Target": "",
    "LastUpdated": "2025-11-21T05:36:39Z",
    "History": [
      {
        "patch": {
          "Phase": null,
          "Target": "",
          "StepID": "orchestrator_worker_ddb_adapter",
          "Evidence": "Updated orchestrator job-store adapter to support pk/sk, job_id, and jobId key shapes; Fixed updateJobStatus to use discovered key shape + correct UpdateExpression (status, updated_at, attempts, payload, error fields); Smoke script now parses job_id from output, scans DDB, and tails worker logs for the specific job; Latest orchestrator E2E smoke: PASS — job reached status 'succeeded', attempts=1, S3 result object present",
          "Decisions": "",
          "Owner": "Zach",
          "StepTitle": null,
          "Next": [
            ""
          ],
          "Blockers": "",
          "Status": "✔"
        },
        "at": "2025-11-21T05:36:39Z"
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "18A_orchestrator_worker_idempotency",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "job-status.ts + status/concurrency harness + orchestrator E2E smoke green; second-worker races modeled as idempotent noise.",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      ""
    ],
    "Owner": "Zach",
    "Target": "",
    "LastUpdated": "2025-11-21T18:31:45Z",
    "History": [
      {
        "patch": {
          "Phase": null,
          "Target": "",
          "StepID": "18A_orchestrator_worker_idempotency",
          "Evidence": "job-status.ts + status/concurrency harness + orchestrator E2E smoke green; second-worker races modeled as idempotent noise.",
          "Decisions": "",
          "Owner": "Zach",
          "StepTitle": null,
          "Next": [
            ""
          ],
          "Blockers": "",
          "Status": "✔"
        },
        "at": "2025-11-21T18:31:45Z"
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "18 Core App Architecture",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "Next 15 app shell + (dashboard) routes; workflows/captures/library skeleton; AppShell typed routes; /api/jobs POST contract + curl+UI 501 smoke; npm run typecheck + npm run dev both clean.",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      "Continue Step 19: wire /api/jobs to orchestrator job creation + surface basic job status list for sample_hello_world."
    ],
    "Owner": "Zach",
    "Target": "",
    "LastUpdated": "2025-11-22T02:03:57Z",
    "History": [
      {
        "patch": {
          "StepTitle": null,
          "Evidence": "Next 15 app shell + (dashboard) routes; workflows/captures/library skeleton; AppShell typed routes; /api/jobs POST contract + curl+UI 501 smoke; npm run typecheck + npm run dev both clean.",
          "Decisions": "",
          "Blockers": "",
          "Owner": "Zach",
          "Status": "✔",
          "Target": "",
          "Next": [
            "Continue Step 19: wire /api/jobs to orchestrator job creation + surface basic job status list for sample_hello_world."
          ],
          "StepID": "18 Core App Architecture",
          "Phase": null
        },
        "at": "2025-11-22T02:03:57Z"
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "19 Workflows run surface + jobs API",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "Sample workflow wired to /api/jobs POST+GET; job list stubbed; /api/jobs smoke-api-jobs.ps1; api-jobs-smoke GitHub Actions workflow using APP_BASE_URL.",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      "Continue with Step 20: wire orchestrator job store + worker to back /api/jobs with real jobs instead of dev stub."
    ],
    "Owner": "Zach",
    "Target": "",
    "LastUpdated": "2025-11-22T04:19:28Z",
    "History": [
      {
        "patch": {
          "StepTitle": null,
          "Evidence": "Sample workflow wired to /api/jobs POST+GET; job list stubbed; /api/jobs smoke-api-jobs.ps1; api-jobs-smoke GitHub Actions workflow using APP_BASE_URL.",
          "Decisions": "",
          "Blockers": "",
          "Owner": "Zach",
          "Status": "✔",
          "Target": "",
          "Next": [
            "Continue with Step 20: wire orchestrator job store + worker to back /api/jobs with real jobs instead of dev stub."
          ],
          "StepID": "19 Workflows run surface + jobs API",
          "Phase": null
        },
        "at": "2025-11-22T04:19:28Z"
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "orchestrator_e2e_smoke",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "Local orchestrator API + DDB/S3 smokes passing; orchestrator-e2e-nightly GitHub Actions workflow green (latest runId=19603266195).",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      ""
    ],
    "Owner": "Zach",
    "Target": "",
    "LastUpdated": "2025-11-23T00:27:16Z",
    "History": [
      {
        "at": "2025-11-23T00:27:16Z",
        "patch": {
          "Blockers": "",
          "Evidence": "Local orchestrator API + DDB/S3 smokes passing; orchestrator-e2e-nightly GitHub Actions workflow green (latest runId=19603266195).",
          "StepID": "orchestrator_e2e_smoke",
          "StepTitle": null,
          "Decisions": "",
          "Status": "✔",
          "Target": "",
          "Next": [
            ""
          ],
          "Owner": "Zach",
          "Phase": null
        }
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "19C_study_tracks_baseline",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "Study Tracks (AWS Foundations & DevOps Essentials) are live at /tracks with per-step local progress (checkboxes + Mark all done / Clear progress), smoke-tested.",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      ""
    ],
    "Owner": "Zach",
    "Target": "",
    "History": [
      {
        "at": "2025-11-23T05:05:16Z",
        "patch": {
          "Blockers": "",
          "Evidence": "Study Tracks (AWS Foundations & DevOps Essentials) are live at /tracks with per-step local progress (checkboxes + Mark all done / Clear progress), smoke-tested.",
          "StepID": "19C_study_tracks_baseline",
          "StepTitle": null,
          "Decisions": "",
          "Status": "✔",
          "Target": "",
          "Next": [
            ""
          ],
          "Owner": "Zach",
          "Phase": null
        }
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "19D_library_placeholder",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "/library now shows a generic Library explainer and links to Study Tracks; fully decoupled from SAA plans.",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      ""
    ],
    "Owner": "Zach",
    "Target": "",
    "History": [
      {
        "at": "2025-11-23T06:31:01Z",
        "patch": {
          "Blockers": "",
          "Evidence": "/library now shows a generic Library explainer and links to Study Tracks; fully decoupled from SAA plans.",
          "StepID": "19D_library_placeholder",
          "StepTitle": null,
          "Decisions": "",
          "Status": "✔",
          "Target": "",
          "Next": [
            ""
          ],
          "Owner": "Zach",
          "Phase": null
        }
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "19E_capture_placeholder",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "/capture now shows a generic Capture explainer and links to Study Tracks; decoupled from SAA plans.",
    "Decisions": "",
    "Blockers": "",
    "Next": [],
    "Owner": "Zach",
    "Target": "",
    "History": [
      {
        "at": "2025-11-23T18:10:09Z",
        "patch": {
          "Blockers": "",
          "Evidence": "/capture now shows a generic Capture explainer and links to Study Tracks.",
          "StepID": "19E_capture_placeholder",
          "StepTitle": null,
          "Decisions": "",
          "Status": "✔",
          "Target": "",
          "Next": [
            ""
          ],
          "Owner": "Zach",
          "Phase": null
        }
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "19F_settings_placeholder",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "/settings now shows a generic Settings explainer (workspace/billing/controls placeholder); navigation is stable for the MVP.",
    "Decisions": "",
    "Blockers": "",
    "Next": [],
    "Owner": "Zach",
    "Target": "",
    "History": [
      {
        "at": "2025-11-23T18:26:35Z",
        "patch": {
          "Blockers": "",
          "Evidence": "/settings now shows a Settings explainer, privacy/export note, and link back to Study Tracks.",
          "StepID": "19F_settings_placeholder",
          "StepTitle": null,
          "Decisions": "",
          "Status": "✔",
          "Target": "",
          "Next": [
            ""
          ],
          "Owner": "Zach",
          "Phase": null
        }
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "<STEPID_FOR_ORCHESTRATOR_AWS_HEALTH>",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "2025-11-26: Created infra/orchestrator/check-orchestrator-aws.ps1. From dev shell, script verifies lifebook-orchestrator-jobs + lifebook-orchestrator-run-logs tables and lifebook-orchestrator-queue (DLQ + RedrivePolicy), sends test SQS message, and confirms queue reachable.",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      ""
    ],
    "Owner": "Zach",
    "Target": "",
    "History": [
      {
        "patch": {
          "Next": [
            ""
          ],
          "Decisions": "",
          "Owner": "Zach",
          "Target": "",
          "Evidence": "2025-11-26: Created infra/orchestrator/check-orchestrator-aws.ps1. From dev shell, script verifies lifebook-orchestrator-jobs + lifebook-orchestrator-run-logs tables and lifebook-orchestrator-queue (DLQ + RedrivePolicy), sends test SQS message, and confirms queue reachable.",
          "StepTitle": null,
          "Blockers": "",
          "Phase": null,
          "StepID": "<STEPID_FOR_ORCHESTRATOR_AWS_HEALTH>",
          "Status": "✔"
        },
        "at": "2025-11-27T18:18:17Z"
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "<STEPID_FOR_API_JOBS_ENDPOINT>",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "2025-11-26: Implemented Next.js App Router endpoint app/api/jobs/route.ts with POST+GET. POST accepts workflowSlug/clientRequestId/input and returns { ok, message, job{ id, jobId, workflowSlug, clientRequestId, status, input } }. GET supports health check and job lookup with optional includeLogs stub.",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      ""
    ],
    "Owner": "Zach",
    "Target": "",
    "History": [
      {
        "patch": {
          "Next": [
            ""
          ],
          "Decisions": "",
          "Owner": "Zach",
          "Target": "",
          "Evidence": "2025-11-26: Implemented Next.js App Router endpoint app/api/jobs/route.ts with POST+GET. POST accepts workflowSlug/clientRequestId/input and returns { ok, message, job{ id, jobId, workflowSlug, clientRequestId, status, input } }. GET supports health check and job lookup with optional includeLogs stub.",
          "StepTitle": null,
          "Blockers": "",
          "Phase": null,
          "StepID": "<STEPID_FOR_API_JOBS_ENDPOINT>",
          "Status": "✔"
        },
        "at": "2025-11-27T18:18:17Z"
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "<STEPID_FOR_ORCHESTRATOR_E2E_SMOKE_GREEN>",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "2025-11-26: Orchestrator wrapper infra/orchestrator/run-orchestrator-smoke.ps1 runs check-orchestrator-aws.ps1 + smoke-orchestrator-e2e.ps1. Final run: /api/jobs smoke creates job, polls status, returns logs; DDB/S3 smoke finds latest sample_hello_world job in lifebook-orchestrator-jobs and confirms workflows/manual/<jobId>/result.md in lifebook.ai. Output: 'E2E orchestrator smoke PASSED: /api/jobs → DynamoDB → S3 (and run logs if present).'",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      ""
    ],
    "Owner": "Zach",
    "Target": "",
    "History": [
      {
        "patch": {
          "Next": [
            ""
          ],
          "Decisions": "",
          "Owner": "Zach",
          "Target": "",
          "Evidence": "2025-11-26: Orchestrator wrapper infra/orchestrator/run-orchestrator-smoke.ps1 runs check-orchestrator-aws.ps1 + smoke-orchestrator-e2e.ps1. Final run: /api/jobs smoke creates job, polls status, returns logs; DDB/S3 smoke finds latest sample_hello_world job in lifebook-orchestrator-jobs and confirms workflows/manual/<jobId>/result.md in lifebook.ai. Output: 'E2E orchestrator smoke PASSED: /api/jobs → DynamoDB → S3 (and run logs if present).'",
          "StepTitle": null,
          "Blockers": "",
          "Phase": null,
          "StepID": "<STEPID_FOR_ORCHESTRATOR_E2E_SMOKE_GREEN>",
          "Status": "✔"
        },
        "at": "2025-11-27T18:18:18Z"
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "J1",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "2025-11-28: /api/jobs POST+GET wired to lifebook-orchestrator (SQS+DDB+S3); run-orchestrator-smoke.ps1 + GET /api/jobs?jobId=...&includeLogs=true passes locally.",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      ""
    ],
    "Owner": "Zach",
    "Target": "",
    "History": [
      {
        "patch": {
          "Next": [
            ""
          ],
          "Decisions": "",
          "Owner": "Zach",
          "Target": "",
          "Evidence": "2025-11-28: /api/jobs POST+GET wired to lifebook-orchestrator (SQS+DDB+S3); run-orchestrator-smoke.ps1 + GET /api/jobs?jobId=...&includeLogs=true passes locally.",
          "StepTitle": null,
          "Blockers": "",
          "Phase": null,
          "StepID": "J1",
          "Status": "✔"
        },
        "at": "2025-11-29T00:09:16Z"
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "J1_SAMPLE_HELLO_WORLD",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "Local dev: npm run orchestrator:smoke → job-54526ecd-a529-4fe0-8ac3-7b8086a8083c → CloudFront 200; npm run orchestrator:download → result.md downloaded and previewed.",
    "Decisions": "",
    "Blockers": "",
    "Next": [],
    "Owner": "Zach",
    "Target": "",
    "History": [
      {
        "patch": {
          "Next": [],
          "Decisions": "",
          "Owner": "Zach",
          "Target": "",
          "Evidence": "",
          "StepTitle": null,
          "Blockers": "",
          "Phase": null,
          "StepID": "J1_SAMPLE_HELLO_WORLD",
          "Status": "✔"
        },
        "at": "2025-11-29T03:03:15Z"
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "<StepID for Phase4 / 19B>",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "/library backed by data/library/catalog.v1.json via /api/library + verifier",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      ""
    ],
    "Owner": "Zach",
    "Target": "",
    "History": [
      {
        "patch": {
          "Next": [
            ""
          ],
          "StepTitle": null,
          "Phase": null,
          "Evidence": "/library backed by data/library/catalog.v1.json via /api/library + verifier",
          "Target": "",
          "Status": "✔",
          "StepID": "<StepID for Phase4 / 19B>",
          "Decisions": "",
          "Owner": "Zach",
          "Blockers": ""
        },
        "at": "2025-12-02T20:11:04Z"
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "4.19B",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "Library index /library supports ?q= search with empty-state UX | Dynamic Library detail route normalized to /library/[id] using slug-based lookup | UI verifier infra/ops/library/verify-library-ui.local.ps1 covers API, index, 3 detail pages, and search (aws|workflow|devops|no-match) | Latest commit: 810f1fc Phase4: add Library empty-search state and tighten verifier",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      ""
    ],
    "Owner": "Zach",
    "Target": "",
    "History": [
      {
        "at": "2025-12-03T00:52:05Z",
        "patch": {
          "StepTitle": null,
          "Target": "",
          "Status": "✔",
          "Phase": null,
          "StepID": "4.19B",
          "Next": [
            ""
          ],
          "Evidence": "Library index /library supports ?q= search with empty-state UX | Dynamic Library detail route normalized to /library/[id] using slug-based lookup | UI verifier infra/ops/library/verify-library-ui.local.ps1 covers API, index, 3 detail pages, and search (aws|workflow|devops|no-match) | Latest commit: 810f1fc Phase4: add Library empty-search state and tighten verifier",
          "Blockers": "",
          "Owner": "Zach",
          "Decisions": ""
        }
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "LIB-Phase4-RunDetail",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "Library Phase 4 CI green on main (library-phase4.yml run 19953329232); Minimal run detail route added at app/(dashboard)/library/runs/[runId]/page.tsx; Run verifier passes in CI and shows runId in the page HTML",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      ""
    ],
    "Owner": "Zach",
    "Target": "",
    "History": [
      {
        "at": "2025-12-05T18:16:58Z",
        "patch": {
          "Target": "",
          "StepTitle": null,
          "Decisions": "",
          "Phase": null,
          "Next": [
            ""
          ],
          "Evidence": "Library Phase 4 CI green on main (library-phase4.yml run 19953329232); Minimal run detail route added at app/(dashboard)/library/runs/[runId]/page.tsx; Run verifier passes in CI and shows runId in the page HTML",
          "StepID": "LIB-Phase4-RunDetail",
          "Blockers": "",
          "Status": "✔",
          "Owner": "Zach"
        }
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "LIB-Phase4-LibraryRunsStub",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "lib/library/runs.ts + Library runs index/detail stub pages; lint & typecheck green",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      "Introduce DATABASE_URL-aware loaders to return real Library runs/artifacts instead of stubs"
    ],
    "Owner": "Zach",
    "Target": "",
    "History": [
      {
        "at": "2025-12-05T19:11:32Z",
        "patch": {
          "Target": "",
          "StepTitle": null,
          "Decisions": "",
          "Phase": null,
          "Next": [
            "Introduce DATABASE_URL-aware loaders to return real Library runs/artifacts instead of stubs"
          ],
          "Evidence": "lib/library/runs.ts + Library runs index/detail stub pages; lint & typecheck green",
          "StepID": "LIB-Phase4-LibraryRunsStub",
          "Blockers": "",
          "Status": "✔",
          "Owner": "Zach"
        }
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "LIB-Phase4-LibraryRunsLoader",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "lib/library/runs.ts async loaders getLibraryRuns/getLibraryRun with DATABASE_URL-aware gating; Library runs index/detail now call loaders; stub fallback preserved",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      "Design DB schema for Library runs/artifacts (db/migrations/20251108_library.sql) so loaders can return real data per workspace"
    ],
    "Owner": "Zach",
    "Target": "",
    "History": [
      {
        "at": "2025-12-05T19:16:50Z",
        "patch": {
          "Target": "",
          "StepTitle": null,
          "Decisions": "",
          "Phase": null,
          "Next": [
            "Design DB schema for Library runs/artifacts (db/migrations/20251108_library.sql) so loaders can return real data per workspace"
          ],
          "Evidence": "lib/library/runs.ts async loaders getLibraryRuns/getLibraryRun with DATABASE_URL-aware gating; Library runs index/detail now call loaders; stub fallback preserved",
          "StepID": "LIB-Phase4-LibraryRunsLoader",
          "Blockers": "",
          "Status": "✔",
          "Owner": "Zach"
        }
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "LIB-Phase4-LibraryRunsSchema",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "db/migrations/20251108_library.sql defines library_runs + library_artifacts tables (workspace-scoped, stub-friendly); ready for orchestrator-backed loaders",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      "Wire Library loaders to real DB queries (respect workspace/entitlements) and migrate off stub data when DATABASE_URL is present"
    ],
    "Owner": "Zach",
    "Target": "",
    "History": [
      {
        "at": "2025-12-05T19:22:19Z",
        "patch": {
          "Target": "",
          "StepTitle": null,
          "Decisions": "",
          "Phase": null,
          "Next": [
            "Wire Library loaders to real DB queries (respect workspace/entitlements) and migrate off stub data when DATABASE_URL is present"
          ],
          "Evidence": "db/migrations/20251108_library.sql defines library_runs + library_artifacts tables (workspace-scoped, stub-friendly); ready for orchestrator-backed loaders",
          "StepID": "LIB-Phase4-LibraryRunsSchema",
          "Blockers": "",
          "Status": "✔",
          "Owner": "Zach"
        }
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "LIB-Phase4-LibraryRunsDbQueries",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "lib/library/runs.ts now uses pgQuery + DB row mappers to read library_runs/library_artifacts (workspace-scoped via LIBRARY_DEBUG_WORKSPACE_ID); stub fallback preserved on missing DB/ID/errors",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      "Replace LIBRARY_DEBUG_WORKSPACE_ID with real workspace-aware helper from auth/session and ensure Library loaders honor retention + entitlements"
    ],
    "Owner": "Zach",
    "Target": "",
    "History": [
      {
        "at": "2025-12-07T00:00:32Z",
        "patch": {
          "Target": "",
          "StepTitle": null,
          "Decisions": "",
          "Phase": null,
          "Next": [
            "Replace LIBRARY_DEBUG_WORKSPACE_ID with real workspace-aware helper from auth/session and ensure Library loaders honor retention + entitlements"
          ],
          "Evidence": "lib/library/runs.ts now uses pgQuery + DB row mappers to read library_runs/library_artifacts (workspace-scoped via LIBRARY_DEBUG_WORKSPACE_ID); stub fallback preserved on missing DB/ID/errors",
          "StepID": "LIB-Phase4-LibraryRunsDbQueries",
          "Blockers": "",
          "Status": "✔",
          "Owner": "Zach"
        }
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "LIB-Phase4-LibraryRunsPolish",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "Library runs index/detail now render DB-backed timestamps via formatTimestamp, fixing Date runtime error; copy updated to describe DB+stub behavior.",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      "Add basic search/sort controls to Library runs index and thread through to lib/library/runs.ts query."
    ],
    "Owner": "Zach",
    "Target": "",
    "History": [
      {
        "at": "2025-12-07T00:43:04Z",
        "patch": {
          "Target": "",
          "StepTitle": null,
          "Decisions": "",
          "Phase": null,
          "Next": [
            "Add basic search/sort controls to Library runs index and thread through to lib/library/runs.ts query."
          ],
          "Evidence": "Library runs index/detail now render DB-backed timestamps via formatTimestamp, fixing Date runtime error; copy updated to describe DB+stub behavior.",
          "StepID": "LIB-Phase4-LibraryRunsPolish",
          "Blockers": "",
          "Status": "✔",
          "Owner": "Zach"
        }
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "LIB-Phase4-LibraryRunsSearchSort",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "Library runs index now supports ?q= search and ?sort=newest|oldest mapped through lib/library/runs.ts to Postgres/stub data.",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      "Hook real orchestrator pipeline so completed jobs write into library_runs/library_artifacts instead of only seed/debug data."
    ],
    "Owner": "Zach",
    "Target": "",
    "History": [
      {
        "at": "2025-12-07T01:26:25Z",
        "patch": {
          "Target": "",
          "StepTitle": null,
          "Decisions": "",
          "Phase": null,
          "Next": [
            "Hook real orchestrator pipeline so completed jobs write into library_runs/library_artifacts instead of only seed/debug data."
          ],
          "Evidence": "Library runs index now supports ?q= search and ?sort=newest|oldest mapped through lib/library/runs.ts to Postgres/stub data.",
          "StepID": "LIB-Phase4-LibraryRunsSearchSort",
          "Blockers": "",
          "Status": "✔",
          "Owner": "Zach"
        }
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "LIB-Phase4-LibraryRunWriteHelper",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "Added lib/library/write-run.ts with upsertLibraryRunWithArtifacts helper for library_runs/library_artifacts, ready for orchestrator job completion wiring.",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      "Call upsertLibraryRunWithArtifacts from the orchestrator when a workflow run completes to persist real Library runs/artifacts."
    ],
    "Owner": "Zach",
    "Target": "",
    "History": [
      {
        "at": "2025-12-07T01:39:48Z",
        "patch": {
          "Target": "",
          "StepTitle": null,
          "Decisions": "",
          "Phase": null,
          "Next": [
            "Call upsertLibraryRunWithArtifacts from the orchestrator when a workflow run completes to persist real Library runs/artifacts."
          ],
          "Evidence": "Added lib/library/write-run.ts with upsertLibraryRunWithArtifacts helper for library_runs/library_artifacts, ready for orchestrator job completion wiring.",
          "StepID": "LIB-Phase4-LibraryRunWriteHelper",
          "Blockers": "",
          "Status": "✔",
          "Owner": "Zach"
        }
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "LIB-Phase4-OrchestratorLibraryWrite",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "Orchestrator worker now calls upsertLibraryRunWithArtifacts on job success using LIBRARY_DEBUG_WORKSPACE_ID; Library runs index reads from Postgres/stub and stays in sync with completed jobs.",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      "Add real artifacts once workflows emit outputs, then surface basic run details/logs alongside Library runs in the UI."
    ],
    "Owner": "Zach",
    "Target": "",
    "History": [
      {
        "at": "2025-12-07T02:51:23Z",
        "patch": {
          "Target": "",
          "StepTitle": null,
          "Decisions": "",
          "Phase": null,
          "Next": [
            "Add real artifacts once workflows emit outputs, then surface basic run details/logs alongside Library runs in the UI."
          ],
          "Evidence": "Orchestrator worker now calls upsertLibraryRunWithArtifacts on job success using LIBRARY_DEBUG_WORKSPACE_ID; Library runs index reads from Postgres/stub and stays in sync with completed jobs.",
          "StepID": "LIB-Phase4-OrchestratorLibraryWrite",
          "Blockers": "",
          "Status": "✔",
          "Owner": "Zach"
        }
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "LIB-Phase4-LibraryRunDetailPage",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "Added app/(dashboard)/library/runs/[id]/page.tsx that loads a Library run via getLibraryRun(runId) and displays label/status/timestamps and artifacts.",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      "Surface orchestrator run logs and richer artifact metadata on the Library run detail view."
    ],
    "Owner": "Zach",
    "Target": "",
    "History": [
      {
        "at": "2025-12-07T03:05:51Z",
        "patch": {
          "Target": "",
          "StepTitle": null,
          "Decisions": "",
          "Phase": null,
          "Next": [
            "Surface orchestrator run logs and richer artifact metadata on the Library run detail view."
          ],
          "Evidence": "Added app/(dashboard)/library/runs/[id]/page.tsx that loads a Library run via getLibraryRun(runId) and displays label/status/timestamps and artifacts.",
          "StepID": "LIB-Phase4-LibraryRunDetailPage",
          "Blockers": "",
          "Status": "✔",
          "Owner": "Zach"
        }
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "LIB-Phase4-LibraryRunLogs",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "Library run detail page now calls listRunLogs(run.id) (best-effort) and renders a Run history section with step/status/message per log entry.",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      "Thread Library artifacts through real workflow outputs and consider linking each Library run back to its orchestrator job view for deeper debugging."
    ],
    "Owner": "Zach",
    "Target": "",
    "History": [
      {
        "at": "2025-12-07T03:11:57Z",
        "patch": {
          "Target": "",
          "StepTitle": null,
          "Decisions": "",
          "Phase": null,
          "Next": [
            "Thread Library artifacts through real workflow outputs and consider linking each Library run back to its orchestrator job view for deeper debugging."
          ],
          "Evidence": "Library run detail page now calls listRunLogs(run.id) (best-effort) and renders a Run history section with step/status/message per log entry.",
          "StepID": "LIB-Phase4-LibraryRunLogs",
          "Blockers": "",
          "Status": "✔",
          "Owner": "Zach"
        }
      }
    ]
  },
  {
    "Phase": "Phase 0 — Infra",
    "StepID": "LIB-Phase4-LibraryRunJobLink",
    "StepTitle": "",
    "Status": "✔",
    "Evidence": "Library run detail page now exposes a dev-only 'View orchestrator job' link to /dev/jobs/run?jobId=<run.id>, keeping Library runs stitched to the orchestrator debugger.",
    "Decisions": "",
    "Blockers": "",
    "Next": [
      "Once real workflows are wired up, verify that completed jobs show up as Library runs with run logs populated via DynamoDB."
    ],
    "Owner": "Zach",
    "Target": "",
    "History": [
      {
        "at": "2025-12-07T03:45:21Z",
        "patch": {
          "Target": "",
          "StepTitle": null,
          "Decisions": "",
          "Phase": null,
          "Next": [
            "Once real workflows are wired up, verify that completed jobs show up as Library runs with run logs populated via DynamoDB."
          ],
          "Evidence": "Library run detail page now exposes a dev-only 'View orchestrator job' link to /dev/jobs/run?jobId=<run.id>, keeping Library runs stitched to the orchestrator debugger.",
          "StepID": "LIB-Phase4-LibraryRunJobLink",
          "Blockers": "",
          "Status": "✔",
          "Owner": "Zach"
        }
      }
    ]
  }
]